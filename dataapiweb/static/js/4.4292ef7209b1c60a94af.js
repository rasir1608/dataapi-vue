webpackJsonp([4],{"2KZm":function(t,e){},DBaU:function(t,e){},LenD:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("woOf"),s=r.n(a),c=r("Xxa5"),i=r.n(c),n=r("fZjL"),o=r.n(n),l=r("exGp"),u=r.n(l),m=r("Dd8w"),p=r.n(m),d=r("ihaF"),h=r("NYxO"),j={components:{ListItem:d.a},data:function(){return{searchProject:{size:"",currentPage:1,id:"",namme:"",creatorName:""},newProjectName:"",projectData:{list:[],total:0}}},watch:{"searchProject.currentPage":{handler:function(){this.searchAllProjects()}}},computed:p()({},Object(h.b)(["marketProjectList","userInfo"])),created:function(){this.searchProject.size=Math.floor(window.innerWidth/220),this.resetCurrentPage()},methods:{searchAllProjects:function(){var t=this;return u()(i.a.mark(function e(){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},o()(t.searchProject).forEach(function(e){(t.searchProject[e]||0===t.searchProject[e])&&(r[e]=t.searchProject[e])}),e.next=4,t.$store.dispatch("searchAllProjects",r);case 4:0===t.marketProjectList.list.length&&t.marketProjectList.total>0&&t.searchProject.currentPage>1&&(t.searchProject.currentPage-=1);case 5:case"end":return e.stop()}},e,t)}))()},resetCurrentPage:function(){var t=this;return u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.searchProject.currentPage){e.next=5;break}return e.next=3,t.searchAllProjects();case 3:e.next=6;break;case 5:t.searchProject.currentPage=1;case 6:case"end":return e.stop()}},e,t)}))()},resertData:function(){s()(this.searchProject,{id:"",name:"",creatorName:""}),this.resetCurrentPage()},createNewProject:function(){if(/^\s*$/.test(this.newProjectName))this.$message.error("请填写新项目的名称");else{var t={name:this.newProjectName,creator:this.userInfo.id,modifier:this.userInfo.id,remarks:"",model:"",ui:"",web:"",createTime:Date.now(),updateTime:Date.now()};this.$store.dispatch("saveProject",t)}},deleteProject:function(t){if(5===t.power){var e=this;this.$alert("该操作将永久删除该项目，以及相关数据，是否继续？","提示",{showCancelButton:!0,callback:function(r){var a=this;return u()(i.a.mark(function s(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("confirm"!==r){a.next=5;break}return a.next=3,e.$store.dispatch("deleteProject",t.projectId);case 3:return a.next=5,e.searchAllProjects();case 5:case"end":return a.stop()}},s,a)}))()}})}else this.$message.error("只有项目管理员才能删除项目")},applyProject:function(t){var e=this;return u()(i.a.mark(function r(){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("applyProject",t.projectId);case 2:return r.next=4,e.resetCurrentPage();case 4:case"end":return r.stop()}},r,e)}))()}}},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"project-market"},[r("div",{staticClass:"project-form"},[r("div",{staticClass:"project-form-items"},[r("div",{staticClass:"form-item-1"},[r("div",{staticClass:"label"},[t._v("项目ID：")]),r("div",{staticClass:"input"},[r("el-input",{attrs:{placeholder:"请输入项目ID"},on:{blur:function(e){t.searchProject.id=t.trimStr(t.searchProject.id)}},model:{value:t.searchProject.id,callback:function(e){t.$set(t.searchProject,"id",e)},expression:"searchProject.id"}})],1)]),r("div",{staticClass:"form-item-1"},[r("div",{staticClass:"label"},[t._v("项目名称：")]),r("div",{staticClass:"input"},[r("el-input",{attrs:{placeholder:"请输入项目名称"},on:{blur:function(e){t.searchProject.name=t.trimStr(t.searchProject.name)}},model:{value:t.searchProject.name,callback:function(e){t.$set(t.searchProject,"name",e)},expression:"searchProject.name"}})],1)]),r("div",{staticClass:"form-item-1"},[r("div",{staticClass:"label"},[t._v("创建人昵称：")]),r("div",{staticClass:"input"},[r("el-input",{attrs:{placeholder:"请输入创建人昵称"},on:{blur:function(e){t.searchProject.creatorName=t.trimStr(t.searchProject.creatorName)}},model:{value:t.searchProject.creatorName,callback:function(e){t.$set(t.searchProject,"creatorName",e)},expression:"searchProject.creatorName"}})],1)])]),r("div",{staticClass:"project-form-submits"},[r("el-button",{on:{click:t.resertData}},[t._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:t.resetCurrentPage}},[t._v("查询")])],1)]),r("div",{staticClass:"project-create"},[r("div",{staticClass:"form-item-1"},[r("el-input",{staticClass:"input",attrs:{placeholder:"请输入项目名称"},on:{blur:function(e){t.newProjectName=t.trimStr(t.newProjectName)}},model:{value:t.newProjectName,callback:function(e){t.newProjectName=e},expression:"newProjectName"}})],1),r("el-button",{attrs:{type:"primary"},on:{click:t.createNewProject}},[t._v("新建项目")])],1),r("div",{staticClass:"project-list"},[t._m(0),t.marketProjectList.list.length?r("div",{staticClass:"project-list-table"},t._l(t.marketProjectList.list,function(e,a){return r("list-item",{key:a,attrs:{item:e},on:{delete:function(r){t.deleteProject(e)},apply:function(r){t.applyProject(e)}}})})):r("div",{staticClass:"project-projects-empty"},[t._v("暂无数据")])]),t.marketProjectList.total?r("div",{staticClass:"project-list-pagination"},[r("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper","page-size":t.searchProject.size,"current-page":t.searchProject.currentPage,total:t.marketProjectList.total},on:{"update:currentPage":function(e){t.$set(t.searchProject,"currentPage",e)}}})],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"project-list-title"},[e("span",[this._v("项目市场：")])])}]};var v=r("VU/8")(j,f,!1,function(t){r("DBaU")},null,null);e.default=v.exports},ihaF:function(t,e,r){"use strict";var a={props:{item:{type:Object,default:function(){return{projectName:"项目1",remarks:" 此处为项目描述：项目描述",creator:"rasir",createTime:"2018-06-30",power:""}}}},data:function(){return{}},methods:{canApply:function(t){return!/^\d$/.test(t.power)}}},s={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"list-item-wrap"},[r("div",{staticClass:"list-item"},[r("div",{staticClass:"item-title"},[t._v(t._s(t.item.projectName))]),r("div",{staticClass:"item-main"},[t._v(t._s(t.item.remarks))]),r("div",{staticClass:"item-footer"},[r("div",{staticClass:"form-item-5"},[r("div",{staticClass:"label"},[t._v("创建人：")]),r("div",{staticClass:"input"},[t._v(t._s(t.item.creatorName))])]),r("div",{staticClass:"form-item-5"},[r("div",{staticClass:"label"},[t._v("创建时间：")]),r("div",{staticClass:"input"},[t._v(t._s(t.item.createTime))])])])]),r("div",{staticClass:"list-item-cover"},[r("div",{staticClass:"list-item-btns"},[t.canApply(t.item)?r("span",{on:{click:function(e){t.$emit("apply")}}},[t._v("申请")]):t._e(),t.item.power>1?r("span",{on:{click:function(e){t.$router.push("/project/edite/"+t.item.projectId)}}},[t._v("编辑")]):t._e(),5===t.item.power?r("span",{on:{click:function(e){t.$emit("delete")}}},[t._v("删除")]):t._e(),r("span",{on:{click:function(e){t.$router.push("/project/detail/"+t.item.projectId)}}},[t._v("查看")])])])])},staticRenderFns:[]};var c=r("VU/8")(a,s,!1,function(t){r("2KZm")},null,null);e.a=c.exports}});
//# sourceMappingURL=4.4292ef7209b1c60a94af.js.map